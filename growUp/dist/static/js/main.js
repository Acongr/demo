function Carousel(){this.curIndex=0,this.timeInterval=3e3,this.baseWidth=$(".center_img .imgbox img").width(),this.aBtn=$(".subscript span"),this.aLi=$(".center_img .imgbox img"),this.oUl=$(".center_img .imgbox"),this.time_=null,this.init(0)}function Drag(){this.obj=null,this.disX=0,this.disY=0,this.settings={}}function fireEvent(t,i){if(t.listeners&&t.listeners[i])for(var e=0;e<t.listeners[i].length;e++)t.listeners[i][e]()}function extend(t,i){for(var e in i)t[e]=i[e]}!function(t){t.fn.extend({left_btn:function(){t(this).click(function(){var i=t(this).parent().find(".box"),e=~~i.position().left,n=i.children().eq(0).width();0!==e&&e%n==0&&i.animate({left:e+n})})},right_btn:function(i){t(this).click(function(){var e=t(this).parent().find(".box"),n=~~e.position().left,o=e.children().eq(0).width(),s=~~e.children().length;n!==i*o-s*o&&n%o==0&&e.animate({left:n-o})})}})}(jQuery),$(function(){function t(){s=setTimeout(function(){var i=~~$("#div1").position().left;i>-~~$("#div1").width()/2?$("#div1").animate({left:i-146}):$("#div1").css({left:0}),t()},2e3)}function i(){r=setTimeout(function(){var t=$(".list_item>.active").index();t===$(".list_item>span").length-1?(e.add_active($(".list_item>span").eq(0)),$(".teacher_box").animate({scrollTop:0})):(e.add_active($(".list_item>span").eq(t+1)),$(".teacher_box").animate({scrollTop:235*~~(t+1)*3})),i()},4e3)}var e=new Carousel;new Drag;$("#div1").append($("#div1").html());var n=$(".box>.list").length,o=$(".box>.list").width();$(".box_>.box").css({width:n*o});var s=null,a=!0,c=!0,l=0;$(".list_item>span").click(function(){var t=$(this).index();e.add_active($(this)),$(".teacher_box").animate({scrollTop:235*t*3})});var r=null;i(),$(".teacher_box,.list_item").hover(function(){clearTimeout(r)},function(){i()}),$(".imgbox,.subscript,.list clearfix").hover(function(){clearInterval(e.time_),l=~~$(".imgbox .active").index()},function(){e.init(l)}),$(".way .list li,.subscript span").click(function(){var t=$(this).index();e.add_active($(".way .list li").eq(t)),e.add_active($(".center_img .imgbox img").eq(t)),e.add_active($(".subscript span").eq(t)),e.init(t)}),t(),$(document).scroll(function(){var i=$(this).scrollTop();console.log(i),i>1500?(console.log(1),clearInterval(e.time_),c||(l=~~$(".imgbox .active").index()),c=!0):c&&(e.init(l),c=!1),i<4500?(clearTimeout(s),a=!0):a&&(t(),a=!1)})}),Carousel.prototype.init=function(t){this.curIndex=t;var i=this;clearInterval(i.time_),i.time_=setInterval(function(t){i.change()},i.timeInterval)},Carousel.prototype.change=function(){this.aBtn=$(".subscript span"),this.curIndex===this.aBtn.length?this.curIndex=0:(this.move(this.curIndex),this.curIndex+=1)},Carousel.prototype.move=function(t){t>this.aLi.length-1&&(t=0,iNow=t),t<0&&(t=this.aLi.length-1,iNow=t),this.add_active(this.aLi.eq(t)),this.add_active($(".way .list li").eq(t)),this.add_active($(".center_img .imgbox img").eq(t)),this.add_active($(".subscript span").eq(t)),this.oUl[0].style.left=-t*this.baseWidth+"px"},Carousel.prototype.add_active=function(t){t.addClass("active").siblings().removeClass("active")},Drag.prototype.init=function(t){var i=this;this.obj=document.getElementById(t.id),extend(this.settings,t),this.obj.onmousedown=function(t){var t=t||window.event;return i.fnDown(t),fireEvent(i,"toDown"),document.onmousemove=function(t){var t=t||window.event;i.fnMove(t)},document.onmouseup=function(){i.fnUp(),fireEvent(i,"toUp");var t=i.obj.offsetLeft,e=i.obj.offsetLeft%leng_w;Math.abs(e)>leng_w/2?$("#div1").animate({left:146*((t-e)/146-1)}):$("#div1").animate({left:t-e})},!1}},Drag.prototype.fnDown=function(t){this.disX=t.clientX-this.obj.offsetLeft},Drag.prototype.fnMove=function(t){t.clientX-this.disX<=0&&t.clientX-this.disX>=-(leng_i-7)*leng_w&&(this.obj.style.left=t.clientX-this.disX+"px")},Drag.prototype.fnUp=function(){document.onmousemove=null,document.onmouseup=null};